
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Installing ownCloud Enterprise Subscription on Windows with SQL Server and IIS &mdash; ownCloud Server Administration Manual 8.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '8.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/bootstrap.js"></script>
    <link rel="top" title="ownCloud Server Administration Manual 8.0 documentation" href="../index.html" />
    <link rel="up" title="Enterprise Subscription Installation (ES Only)" href="index.html" />
    <link rel="next" title="Installing and Managing Apps" href="apps_management_installation.html" />
    <link rel="prev" title="Installing ownCloud Enterprise Edition on Linux" href="linux_installation.html" />
<script type="text/javascript">
(function () {
  /**
   * Patch TOC list.
   *
   * Will mutate the underlying span to have a correct ul for nav.
   *
   * @param $span: Span containing nested UL's to mutate.
   * @param minLevel: Starting level for nested lists. (1: global, 2: local).
   */
  var patchToc = function ($ul, minLevel) {
    var findA;

    // Find all a "internal" tags, traversing recursively.
    findA = function ($elem, level) {
      var level = level || 0,
        $items = $elem.find("> li > a.internal, > ul, > li > ul");

      // Iterate everything in order.
      $items.each(function (index, item) {
        var $item = $(item),
          tag = item.tagName.toLowerCase(),
          pad = 15 + ((level - minLevel) * 10);

        if (tag === 'a' && level >= minLevel) {
          // Add to existing padding.
          $item.css('padding-left', pad + "px");
          console.log(level, $item, 'padding-left', pad + "px");
        } else if (tag === 'ul') {
          // Recurse.
          findA($item, level + 1);
        }
      });
    };

    console.log("HERE");
    findA($ul);
  };

  $(document).ready(function () {
    // Add styling, structure to TOC's.
    $(".dropdown-menu").each(function () {
      $(this).find("ul").each(function (index, item){
        var $item = $(item);
        $item.addClass('unstyled');
      });
      $(this).find("li").each(function () {
        $(this).parent().append(this);
      });
    });

    // Patch in level.
    patchToc($("ul.globaltoc"), 2);
    patchToc($("ul.localtoc"), 2);

    // Enable dropdown.
    $('.dropdown-toggle').dropdown();
  });
}());
</script>

  </head>
  <body>
  

<div class="container">
  <div class="content">
    <div class="page-header">
      <h1><a href="../contents.html">ownCloud Server Administration Manual</a></h1>

    </div>
    
			<div class="row">
				<div class="span3">
					<div class="sidebar">
						<div class="well">
							<div class="menu-support-container">
								<ul id="menu-support" class="menu">
									<ul>
										<li><a href="../contents.html">Overview</a></li>
									</ul>
                  <ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">ownCloud 8.0 Server Administration Manual Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release_notes.html">ownCloud 8.0 Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../whats_new_admin.html">What&#8217;s New for Admins in ownCloud 8</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration_user/index.html">User Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration_files/index.html">File Sharing and Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration_server/index.html">ownCloud Server Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration_database/index.html">Database Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../maintenance/index.html">Maintenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../operations/index.html">Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../issues/index.html">Issues and Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../videos/index.html">ownCloud Videos</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Enterprise Subscription Installation (ES Only)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="linux_installation.html">Installing ownCloud Enterprise Edition on Linux</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Installing ownCloud Enterprise Subscription on Windows with SQL Server and IIS</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#installing-iis-php-and-sql-server">Installing IIS, PHP, and SQL Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuring-php">Configuring PHP</a></li>
<li class="toctree-l3"><a class="reference internal" href="#installing-owncloud">Installing ownCloud</a></li>
<li class="toctree-l3"><a class="reference internal" href="#installation-wizard">Installation Wizard</a></li>
<li class="toctree-l3"><a class="reference internal" href="#protecting-your-server-from-data-loss">Protecting Your Server from Data Loss</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="apps_management_installation.html">Installing and Managing Apps</a></li>
<li class="toctree-l2"><a class="reference internal" href="supported_apps_installation.html">Supported ownCloud Enterprise Subscription Apps</a></li>
<li class="toctree-l2"><a class="reference internal" href="license_keys_installation.html">License Keys</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../enterprise_clients/index.html">Creating Custom and Branded ownCloud Clients (ES only)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../enterprise_external_storage/index.html">External Storage (ES only)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../enterprise_user_management/index.html">User Management (ES only)</a></li>
</ul>

								</ul>
							</div>
						</div>
					</div>
				</div>
        

				<div class="span9">
					<div class="page-content">
						
  <div class="section" id="installing-owncloud-enterprise-subscription-on-windows-with-sql-server-and-iis">
<h1>Installing ownCloud Enterprise Subscription on Windows with SQL Server and IIS<a class="headerlink" href="#installing-owncloud-enterprise-subscription-on-windows-with-sql-server-and-iis" title="Permalink to this headline">¶</a></h1>
<p>The most streamlined method of installing ownCloud on a Windows server is to use the
Microsoft Web Platform Installer (WPI).  Download this free utility from
<a class="reference external" href="http://www.microsoft.com/web/downloads/platform.aspx/">Microsoft Web</a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>While ownCloud will run in any standard PHP environment,
including IIS or Apache on Windows, there are known issues.
For the basic sync and share capabilities of ownCloud, Windows
web servers (Apache and IIS) will function properly. However,
as apps like external storage are added, particularly SMB mounts,
and non-English characters are used in filenames, some of the known
Windows and IIS/Apache challenges start to appear as bugs.</p>
<p>ownCloud is not supported on the Internet Server Application
Programming Interface (ISAPI).</p>
<p class="last">For these reasons, while ownCloud server will run on Windows and is supported,
it is not recommended at this time.</p>
</div>
<p>You also need the ownCloud package, which you can download from the <tt class="docutils literal"><span class="pre">ownCloud</span> <span class="pre">8</span>
<span class="pre">Enterprise</span> <span class="pre">Edition</span> <span class="pre">for</span> <span class="pre">Windows</span> <span class="pre">Files</span></tt> folder in your account on
<a class="reference external" href="http://customer.owncloud.com/">Customer.owncloud.com</a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you are upgrading an existing ownCloud installation, please refer to the
Customer Advisory document in the <tt class="docutils literal"><span class="pre">ownCloud</span> <span class="pre">8</span> <span class="pre">Enterprise</span> <span class="pre">Edition</span> <span class="pre">for</span> <span class="pre">Windows</span></tt> folder
in your account on
<a class="reference external" href="http://customer.owncloud.com/">Customer.owncloud.com</a>. .</p>
</div>
<div class="section" id="installing-iis-php-and-sql-server">
<h2>Installing IIS, PHP, and SQL Server<a class="headerlink" href="#installing-iis-php-and-sql-server" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Please note the last step on this page for protecting your server from data loss.</p>
</div>
<p>After downloading and installing WPI, open it. It looks like this:</p>
<div class="figure">
<img alt="../_images/windows-install-1.png" src="../_images/windows-install-1.png" />
</div>
<p>Navigate to the <tt class="docutils literal"><span class="pre">Products</span></tt> tab:</p>
<div class="figure">
<img alt="../_images/windows-install-2.png" src="../_images/windows-install-2.png" />
</div>
<p>Now install the following components by clicking the <tt class="docutils literal"><span class="pre">Add</span></tt> button next to each
item:</p>
<div class="highlight-python"><pre>HTTP Server:
 IIS Recommended Configuration
 IIS Static Content
 IIS Default Document
 IIS Directory Browsing
 IIS HTTP Errors
 IIS HTTP Redirection
 IIS CGI
 IIS ISAPI Extensions
 IIS ISAPI Filters
 IIS Server Side Includes
 IIS HTTP Logging
 IIS Logging Tools
 IIS Request Monitor
 IIS Tracing
 IIS Custom Logging
 IIS Client Certificate Mapping Authentication
 IIS URL Authorization
 IIS Request Filtering
 IIS IP Domain Restrictions
 IIS Static Content Compression
 IIS Dynamic Content Compression
 IIS Management Console
 IIS Management Scripts and Tools
 IIS Management Service

PHP Frameworks
 PHP 5.4.14
 Windows Cache Extension 1.3 for PHP 5.4

SQL Server Database
 Microsoft Drivers for PHP v5.4 for SQL Server IIS

PHP Tools
 PHP Manager for IIS</pre>
</div>
<p>After selecting all of these, click the <tt class="docutils literal"><span class="pre">Install</span></tt> button at the bottom. It will take a
little time to install everything. When the installation is complete, the next step is to
configure PHP.</p>
</div>
<div class="section" id="configuring-php">
<h2>Configuring PHP<a class="headerlink" href="#configuring-php" title="Permalink to this headline">¶</a></h2>
<p>It is important to enable all verbs in the PHP FastCGI settings in order for the sync to
work properly. In the IIS Management application, double-click Handler Mappings.</p>
<div class="figure">
<img alt="../_images/windows-install-3.png" src="../_images/windows-install-3.png" />
</div>
<p>Then double-click on the PHP FastCGI Settings.</p>
<div class="figure">
<img alt="../_images/windows-install-4.png" src="../_images/windows-install-4.png" />
</div>
<p>If there are any spaces in the filename in the
<tt class="docutils literal"><span class="pre">Executable</span> <span class="pre">(optional)</span></tt> field you must enclose the filename in quotation marks.</p>
<div class="figure">
<img alt="../_images/windows-install-7.png" src="../_images/windows-install-7.png" />
</div>
<p>Then click the <tt class="docutils literal"><span class="pre">Request</span> <span class="pre">Restrictions</span></tt> button.</p>
<div class="figure">
<img alt="../_images/windows-install-5.png" src="../_images/windows-install-5.png" />
</div>
<p>Now navigate to the <tt class="docutils literal"><span class="pre">Verbs</span></tt> tab and verify that <tt class="docutils literal"><span class="pre">All</span> <span class="pre">Verbs</span></tt> is selected, then click
<tt class="docutils literal"><span class="pre">OK</span></tt>.</p>
<div class="figure">
<img alt="../_images/windows-install-6.png" src="../_images/windows-install-6.png" />
</div>
<p>You will be prompted to create a FastCGI application; click <tt class="docutils literal"><span class="pre">Yes</span></tt>.</p>
<div class="figure">
<img alt="../_images/windows-install-8.png" src="../_images/windows-install-8.png" />
</div>
<p>Then restart the IIS service to apply all changes.</p>
</div>
<div class="section" id="installing-owncloud">
<h2>Installing ownCloud<a class="headerlink" href="#installing-owncloud" title="Permalink to this headline">¶</a></h2>
<p>Unzip your ownCloud archive (downloaded from your account on
<a class="reference external" href="http://customer.owncloud.com/">Customer.owncloud.com</a>), which unpacks to a single
<tt class="docutils literal"><span class="pre">owncloud</span></tt> folder containing all ownCloud files. Place this in your Web root, typically
<tt class="docutils literal"><span class="pre">C:\inetpub\wwwroot\</span></tt>, so you have <tt class="docutils literal"><span class="pre">C:\inetpub\wwwroot\owncloud</span></tt>. Set permissions on
<tt class="docutils literal"><span class="pre">C:\inetpub\wwwroot\owncloud</span></tt> so that your IIS user has read-write access.</p>
</div>
<div class="section" id="installation-wizard">
<h2>Installation Wizard<a class="headerlink" href="#installation-wizard" title="Permalink to this headline">¶</a></h2>
<p>Now point a Web browser to your new ownCloud installation, for example
<tt class="docutils literal"><span class="pre">http://inetpub/wwwroot/owncloud</span></tt>. This launches the Installation Wizard, which
completes the final steps for configuring your new ownCloud server. See
<a class="reference internal" href="../installation/installation_wizard.html"><em>Installation Wizard</em></a> for instructions on using the Installation Wizard.</p>
</div>
<div class="section" id="protecting-your-server-from-data-loss">
<h2>Protecting Your Server from Data Loss<a class="headerlink" href="#protecting-your-server-from-data-loss" title="Permalink to this headline">¶</a></h2>
<p>Under certain circumstances, running your ownCloud server on IIS could be at risk of
data loss. To prevent this, follow these steps.</p>
<p>In your ownCloud server configuration file, <tt class="docutils literal"><span class="pre">owncloud\config\config.php</span></tt>, set
<tt class="docutils literal"><span class="pre">config_is_read_only</span></tt> to true.</p>
<p>Set the <tt class="docutils literal"><span class="pre">config.php</span></tt> file to read-only.</p>
<p>When you make server updates <tt class="docutils literal"><span class="pre">config.php</span></tt> must be made writeable. When your updates are
completed re-set it to read-only.</p>
</div>
</div>


					</div>
				</div>
			</div>
    
  </div>
</div>
  </body>
</html>